---
title: 전공책 (백준 16508번)
date: 2024-10-29 00:00:00 +09:00
categories: [PS(Baekjoon), Brute Force]
use_math: true
tags:
  [
    PS(Baekjoon),
    Python,
    Brute Force
  ]
pin: false
---

## 문제

곧 졸업을 앞둔 민호는 대학교 생활 동안 구매만 해놓고 한 번도 펴보지 않은 전공책에 먼지가 쌓여 있는 것을 보고는, 이 책들을 어떻게 처리해야 할지 고민 중이다. 열심히 고민한 끝에 민호는 결국 전공책을 모두 버리기로 마음먹었다. 하지만 그냥 버리기엔 심심한 민호는 전공책 제목에 있는 글자들을 오려서 단어 만들기 놀이를 하려고 한다. 단어 만들기 놀이는 아래 예시와 같다.

![image](https://github.com/user-attachments/assets/28c46d59-4b84-46e7-abcb-2fc4e427671a)

- 1번 책 : `COMPUTERARCHITECTURE` (35,000원)
- 2번 책 : `ALGORITHM` (47,000원)
- 3번 책 : `NETWORK` (43,000원)
- 4번 책 : `OPERATINGSYSTEM` (40,000원)

만약 민호가 만들고 싶은 단어가 `ALMIGHTY`라고 하면, 위 4개의 책 중, 1번 책에서 `A`를, 2번 책에서 `L, M, I, G, H, T`를, 4번 책에서 `Y`를 오려내어 원하는 단어를 만들 수 있다. 이때 드는 비용은 1번, 2번, 4번 책 가격의 합인 `122,000원`이다.

만약 `ANT`라는 단어를 만들고 싶다고 하면, 2번 책에서 `A`를, 3번 책에서 `N, T`를 오려내어 원하는 단어를 만들 수 있다. 이때 드는 비용은 2번과 3번 책 가격을 합하여 `90,000원`이다. 그런데, `ANT`라는 단어에서 `A`를 2번 책에서 오려내지 않고, 4번 책에 있는 `A`를 오려낼 수도 있다. 만약 4번 책에서 `A`를 오려냈을 때 드는 비용은 3번과 4번 책 가격을 합하여 `83,000원`으로 2번과 3번 책을 고른 비용보다 작다. 하지만, 4번 책에는 `ANT`가 모두 포함되어 있으므로, 4번 책만 선택했을 때 드는 비용이 `40,000원`이다. 이는 `ANT`라는 단어를 만들기 위해서 가장 적은 비용이다.

민호는 여러 개의 전공책들을 나열해 놓고는, 심각한 고민 끝에 전공책 제목에 있는 글자를 오려내어 자신이 원하는 단어를 만들기 위해서는 여러 가지 경우가 있다는 것을 깨달았다. 매우 심심했던 민호는 가장 적은 비용으로 자신이 원하는 단어를 만들려면 어떤 전공책들을 선택해야 하는지 궁금했다. 하지만 일일이 가능한 조합을 만들어 보는 것은 매우 시간 낭비라고 생각한 민호는 컴퓨터공학과답게 프로그램을 만들려고 한다.

민호를 도와 각 전공책의 가격과 제목이 주어졌을 때, 가장 적은 비용으로 민호가 원하는 단어를 만들기 위해서 어떤 전공책을 선택해야 하는지 알아보자.

## 입력

첫 번째 줄에는 민호가 만들고자 하는 단어를 의미하는 문자열 *T* (1 ≤ |*T*| ≤ 10)가 주어진다. *T*는 항상 대문자이며, |*T*|는 문자열 *T*의 길이를 의미한다.

두 번째 줄에는 민호가 가진 전공책의 개수를 의미하는 정수 *N* (1 ≤ *N* ≤ 16)이 주어진다.

다음 *N*개의 각 줄에는 전공책 가격을 의미하는 정수 *Ci* (10,000 ≤ *Ci* ≤ 100,000)와 제목을 의미하는 문자열 *Wi* (1 ≤ |*Wi*| ≤ 50)가 주어진다. *Wi*는 항상 대문자이다.

## 출력

민호가 원하는 단어 *T*를 만들기 위해서 선택해야 하는 전공책의 가장 적은 가격의 합을 출력한다. 만약 단어를 만들 수 없다면 `-1`을 출력한다.

![image 1](https://github.com/user-attachments/assets/1682f89a-d6ae-4357-84be-2e1ff1385eb7)

# 나의 풀이

```python
import sys
from itertools import combinations
input=sys.stdin.readline

T=input().strip()
T_len=len(T)
N=int(input().strip())
books=[]
im_books=[]
for _ in range(N):
    p,b=input().strip().split()
    books.append([int(p),b])
    im_books.append([int(p),b])
for i in range(2,N+1):
    for comb in combinations(im_books,i):
        t_p=0
        t_w=''
        for c in comb:
            t_p+=c[0]
            t_w+=c[1]
        books.append([t_p,t_w])
books.sort(key=lambda x:(x[0],-len(x[1])))
total_price=0
for price,words in books:
    for t in T:
        if t in words:
            words=words.replace(t,'',1)
        else:
            break
    else:
        print(price)
        break
else:
    print(-1)
```

- 책의 모든 조합을 구하고, 그 조합에서의 총 가격과 문자열들을 저장한다.
- 그 후 가격이 낮은 순, 문자열이 긴 순으로 정렬하여 replace를 통해 모든 문자열이 존재하는 가격을 출력한다.
- 주의) replace를 사용할 때 변수에 저장을 해주어야 적용됨
- replace와 key=lambda 사용 문법을 외워두자